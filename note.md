# 考察メモ

# 12/22

- 労働のみの場合の戦略を考える
- 増資がない場合の戦略を考える
- 増資によってできるようになることを考える

- 本線はモンテカルロ
- `x`は適宜推論する
- 分数にしなくて良い

## 労働のみの場合の戦略

- 所持金を使い切るように、なるべく\sum wが大きいカードを使う
- 最後はプロジェクトを完了するように通常労働もする

## 入れ替えがあり、増資がない場合の戦略

- v/cが小さいものは交換する

## 増資による効果

- 今持っているプロジェクトのコスト`c`を`ceil(c/2)`にできる
- どういう時にすべきか
    - 入れ替えがない場合: \sum v v.s. \sum c
    - cが大きい時にメリットがある
    - cが大きい&v/cが大きいプロジェクトを貯める

## 入力生成

- `E[w]=E[p]`
- `E[p|t=0,1] = 25`
- `E[p|t=2,3] = 5`
- `E[p|t=4] = 600`

- `E[h]=E[v]`

## 難しいところの言語化

- ターン数が決まっているので、効率が良い通常労働より、少し効率が悪い全体労働の方が良い場合がある
- 入れ替えは1ターン消費するため、基準の設定が難しい
    - 期待値をうまく計算できそう
- 増資のタイミングが難しい

## 大方針

- 賢い貪欲を考えてモンテカルロ

# 12/23

- 増資は20回使い切らなくて良い
- 1ターンの価値は期待スコアで出せる？
    - 0を選び続けた時の期待スコア？
- 先読みでビームサーチしてみる？
- 基本は労働カード+増資カード(0,1)にする
- 必要であれば入れ替えカードを買う
- 全入れ替え -> 何個か入れ替え -> 増資カード
- 大変なプロジェクトは出現頻度が少ない
    - 貯めることが大事

## 行動パターン

- 大変なプロジェクトを貯める
    - 増資した時に、価値が大きい
- 普通にプロジェクトをこなす
- 質の悪いプロジェクトを入れ替える

## カードの選択

- 手持ちのカードを見る
- 最もお得なやつを買う
    - 期待コストも見る

## 期待値計算

- `E[w] = E[p]`、`E[h] = E[v]`、`E[w] = E[h]`なので、`E[p] = E[v]`

### 労働カード

- 得られる利得の期待値 - p
    - f(v*h/p)
    - fは逓減する任意の関数

### 入れ替えの期待値

- 得られるプロジェクトの期待利得 - p - 労働の利得の期待値

### 増資の期待値

- 増資の期待利得 - p - 労働の期待値

- 0021で基本考察する

## 課題

- wが小さくなってしまう
    - ターン制限があるので、大きいところを優先したい
- 増資した方が資金が大きい
    - なるべく増資した上で、プロジェクトを最大限進める
- 増資するかしないか、モンテカルロで期待値が高い方を選ぶ

# 12/24

- 最初は小さいプロジェクトを進めたい
- 弱いカードしか持っていない
- 入れ替えカードを買っておいてから、増資をした方が良い
- 増資カードをたくさん買っておいた方が良い？
    - 変わらないか
- 増資しない方が良いパターンもある
    - 今までの傾向から、増資しない方が良いタイミングはなんとなくわかる
    - 詰めるならモンテカルロ
- 持っているカードの多様性を考慮する
- 高い増資カードを買うのは勿体無い

## TODO:

- 手持ちを優先して使う
- 無駄使いをしない
- 使えないカードは早めに捨てる
- お金がない時は入れ替えて小さいプロジェクトを作った方が良い
    - 無駄なものは早めに入れ替えておく

# 12/25

- いいカードを手持ちに持っておく
- 微調整する時と一気に使う時をうまくやる
- 買わない方が良いカードは買わない
    - project.h > ターン数 * 2.pow(1000 - t)なら買わない
- 増資する前に状況を整える

- 増資後に大きいプロジェクトしか残っておらず、消化できない
- 増資の回数を増やせるように
    - 金回りをうまくやる
- いいカードを手持ちに持っておく
- 小さいプロジェクトを進めたい
    - 大きいプロジェクトは効率が悪い
- 投資カードが全然来ない時は早めに買う

- 最後の詰め
    - 一個のプロジェクトに集中する
    - 最後の増資は増資カードを買ったタイミングでする
- プロジェクトの進め方

## TODO:

- プロジェクトの進め方（貪欲）の改善
    - 全体労働、全体キャンセルの改善
    - 最終盤に労働力を集中させる
- モンテカルロで増資すべきかどうかを判断
- パラメータ最適化

# 12/26

- 508を見る
- 増資するタイミングの調整
- 全体労働、全体キャンセルの改善
